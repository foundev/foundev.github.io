---
wordpress_id: 41
title: Dynamic DNS with Amazon EC2 Linux and EveryDNS
date: 2010-06-06T18:02:32+00:00
author: Ryan Svihla
layout: post
wordpress_guid: /blogs/rssvihla/archive/2010/06/06/dynamic-dns-with-amazon-ec2-linux-and-everydns.aspx
dsq_thread_id:
  - "1071427002"
tags:
  - EC2
redirect_from: "/blogs/rssvihla/archive/2010/06/06/dynamic-dns-with-amazon-ec2-linux-and-everydns.aspx/"
---
<p>So I finally sat down and did the math and found out Amazon EC2 was quite a bit cheaper than what I’d been paying for hosting as long as I was willing to prepay for at least a year.&#160; However, with EC2 you are getting a dynamic ip’s so what to do? Well I’ve been using EveryDNS for years for my dns hosting and despite it’s recent acquisition by Dyn, Inc it’s still works the same. The scripts that are described below can be downloaded <a href="http://unstabletransit.com/blogfiles/dyndns.tgz" target="_blank">here</a>, what follows is a brief walkthrough.</p>
<ol>
<li>Download EveryDns update script from <a href="http://www.everydns.com/dynamic.php">http://www.everydns.com/dynamic.php</a>&#160; and place it in something like /usr/local/bin. </li>
<li>Create a convenience script in /usr/local/bin that will get your external ip and have it contain the following lines and call it <strong>external-ip.sh .</strong> This is using Amazon’s suggested curl command to find out your EC2 instance Ip address. <ol>
<li><a href="https://lostechies.com/content/ryansvihla/uploads/2011/03/externalip_03406163.png"><img style="border-right-width: 0px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px" border="0" alt="external-ip" src="https://lostechies.com/content/ryansvihla/uploads/2011/03/externalip_thumb_7E5DADA6.png" width="670" height="168" /></a> </li>
</ol>
</li>
<li>Then create a script for the actual dynamic DNS update in /usr/local/bin/ and call it updatedns-sh. This is using the set command to grab the output of external ip and storing it in the variable $1, and then passing that value to the update command. <strong>NOTE: this will update the dns record of ALL your domains with everydns set to dynamic</strong>. If you need to use specific domain names there is a –d flag for the eDNS client.<a href="https://lostechies.com/content/ryansvihla/uploads/2011/03/update_3944E070.png"><img style="border-right-width: 0px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px" border="0" alt="update" src="https://lostechies.com/content/ryansvihla/uploads/2011/03/update_thumb_547D3971.png" width="677" height="169" /></a> </li>
<li>create a cron job on your linux distro of choice but the cron job line should look like the following. <ol>
<li><a href="https://lostechies.com/content/ryansvihla/uploads/2011/03/cron_791157A6.png"><img style="border-right-width: 0px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px" border="0" alt="cron" src="https://lostechies.com/content/ryansvihla/uploads/2011/03/cron_thumb_51D70E71.png" width="754" height="38" /></a> </li>
</ol>
</li>
</ol>
<p>For those wishing to comment I’ve cross posted to my blogger account.</p>
<p><a href="http://ryansvihla.blogspot.com/2010/06/dynamic-dns-with-amazon-ec2-linux-and.html">http://ryansvihla.blogspot.com/2010/06/dynamic-dns-with-amazon-ec2-linux-and.html</a></p>